<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ProEdit Feedback</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-900 text-white">
  <div class="max-w-lg mx-auto p-6">

    <h1 class="text-3xl font-bold mb-4">ProEdit Feedback</h1>
    <p class="text-gray-300 mb-6">
      Help us improve ProEdit by sharing your thoughts.
    </p>

    <form id="feedbackForm" class="space-y-4">

      <input id="name" type="text" placeholder="Your Name"
        class="w-full p-3 rounded bg-gray-800 border border-gray-700" />

      <input id="email" type="email" placeholder="Your Email"
        class="w-full p-3 rounded bg-gray-800 border border-gray-700" />

      <select id="rating"
        class="w-full p-3 rounded bg-gray-800 border border-gray-700">
        <option value="">Rating</option>
        <option value="1">★☆☆☆☆</option>
        <option value="2">★★☆☆☆</option>
        <option value="3">★★★☆☆</option>
        <option value="4">★★★★☆</option>
        <option value="5">★★★★★</option>
      </select>

      <textarea id="message" placeholder="Your feedback..."
        rows="4"
        class="w-full p-3 rounded bg-gray-800 border border-gray-700"></textarea>

      <button type="submit"
        class="w-full bg-blue-600 hover:bg-blue-700 p-3 rounded font-semibold">
        Submit Feedback
      </button>
    </form>

    <p id="status" class="mt-4 text-center text-green-400 hidden">Feedback submitted!</p>
  </div>

  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js";

    const supabase = createClient(
      import.meta.env.VITE_SUPABASE_URL,
      import.meta.env.VITE_SUPABASE_ANON_KEY
    );

    const form = document.getElementById("feedbackForm");
    const status = document.getElementById("status");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const { error } = await supabase.from("proedit_feedback").insert({
        name: document.getElementById("name").value,
        email: document.getElementById("email").value,
        rating: document.getElementById("rating").value,
        message: document.getElementById("message").value,
      });

      if (error) {
        alert("Error submitting feedback: " + error.message);
        return;
      }

      status.classList.remove("hidden");
      form.reset();

      setTimeout(() => status.classList.add("hidden"), 3000);
    });
  </script>
</body>
</html>
